---
title: "Introducci√≥n a R"
subtitle: "Econometr√≠a I"
author: "Paula Pereda (ppereda@correo.um.edu.uy)"
date: "13 de agosto de 2021"
output:
  xaringan::moon_reader:
    css: ['default', 'metropolis', 'metropolis-fonts', 'my-css.css']
    lib_dir: libs
    nature:
      self_contained: true
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---
class: inverse, middle


```{r Setup, include = F}
library(pacman)
p_load(dplyr, magrittr, knitr)

# Notes directory

# Knitr options
opts_chunk$set(
  comment = ">",
  fig.align = "center",
  fig.height = 7,
  fig.width = 10.5,
  # dpi = 300,
  # cache = T,
  warning = F,
  message = F
)
```




# Preliminares
---
#Sobre los talleres en s√≠

- .hi-pink[Viernes] de 08:00 a 09:40 | üìç Sede Sinergia Ejido (Ejido 1275) - Sal√≥n K301

- Talleres: ejercicios te√≥ricos + aplicaciones en R (intuici√≥n & pr√°ctica).

- Cada dos semanas apr√≥ximadamente hay que hacer un .pink[trabajo domiciliario]. 

- .hi-purple[Trabajo final:]

    + Hasta 3 integrantes

    + 29/10: Entrega tema de trabajo de investigaci√≥n.
    
    + 21/11: Entrega trabajo de investigaci√≥n (*paper* o presentaci√≥n, c√≥digo + datos).

    + Mi mail est√° al inicio de cada presentaci√≥n, **por cualquier consulta siempre me pueden escribir.** 
---
#Sobre los talleres en s√≠

- .hi-purple[Composici√≥n de la nota final:]

    + Parcial                      -   40%

    + Trabajo de investigaci√≥n     -   30%
    
    + Pr√°cticos                    -   25%

    + Actitud y participaci√≥n      -   5%
---
# Econometr√≠a

Un econometrista aplicado<sup>‚Ä†</sup>  necesita un conocimiento s√≥lido de (al menos) tres √°reas:

1. La __teor√≠a__ de la econometr√≠a subyacente (supuestos, resultados, fortalezas, debilidades).

2. Sab√©r c√≥mo __aplicar m√©todos te√≥ricos__ a datos reales.

3. M√©todos eficientes para __trabajar con datos __‚Äî limpiar, agregar, unir, visualizar.

__Este curso__ tiene como objetivo profundizar conocimientos en cada una de estas tres √°reas.

- 1: Como antes.
- 2‚Äì3: __.mono[R]__

.footnote[[‚Ä†]: _Econometrista aplicado_ .mono[=] Practicante de econometr√≠a, _e.g._, analista, consultor, cient√≠fico de datos.]

---
class: inverse, middle

# .mono[R]
---
layout: true
# .mono[R]

---

## ¬øQu√© es .mono[R]?

Citando a la web del [proyecto .mono[R]](https://www.r-project.org):

> R es un entorno de software libre para gr√°ficos y computaci√≥n estad√≠stica. Se compila y se ejecuta en una amplia variedad de plataformas UNIX, Windows y MacOS.

¬øQu√© significa esto?

- .mono[R] fue creado para el trabajo estad√≠stico y gr√°fico requerido por la econometr√≠a.

- .mono[R] tiene una comunidad en l√≠nea bastante activa y √∫til. ([Stack Overflow](https://stackoverflow.com/questions/tagged/r), [R-Ladies](https://rladies.org/), [Grupos de usuarios de R](https://www.r-consortium.org/blog/2019/09/09/r-community-explorer-r-user-groups))

- Adem√°s, es __gratis__ y __c√≥digo abierto__.

---

## ¬øPor qu√© usar .mono[R]?

1\. .mono[R] es __gratis__ y de __c√≥digo abierto__.

2\. .mono[R] es __flexible y poderoso__‚Äî es adaptable a casi cualquier tarea, _e.g._, estad√≠stica, an√°lisis de datos espaciales, machine learning, web scraping, limpieza de datos, creaci√≥n de sitios web, estas notas de clase.

3\. _Relacionado:_ .mono[R] __no impone__ en la cantidad de observaciones, memoria o poder de procesamiento.

4\. Con dedicaci√≥n <sup> ‚Ä† </sup> pueden obtener una herramienta __valiosa y comercial__. 

5\. üíñ __.mono[R]__


.footnote[[‚Ä†]: Aprender .mono[R] definitivamente requiere tiempo y esfuerzo.]
---

.center[
<img src="images/al_principio_pero_ahora.png" width="500">]

---

.center[
<img src="images/04_emotions.png" width="800">]

---

.center[
<img src="images/acordes.png" width="800">]

---
.center[
<img src="images/sni_2020.png" width="800">]

---
.center[
<img src="images/evolucion_ratio_sd_cot-1.gif" width="800">]

---
.center[
<img src="images/pptx.gif" width="800">]

---

- Aplicaciones web: https://bancodedatos-fcs.shinyapps.io/OMIF-UNICEF/
- Libros: https://www.econometrics-with-r.org/

---
layout: false
class: inverse, middle
# .mono[R] + [Conceptos claves]

---
# Descarga, actualizaci√≥n y R en l√≠nea
  
1\. Descarga

- La descarga e instalaci√≥n de .mono[R] se hace desde este link: https://cran.r-project.org/
- La descarga e instalaci√≥n de RStudio se hace desde este link: https://www.rstudio.com

2\. Actualizaci√≥n de .mono[R]

- Una manera simple desde Windows:
  
```{r, eval = F}
install.packages("installr")
installr::updateR()
```

- Una manera simple desde Mac:
  
```{r, eval = F}
devtools::install_github("AndreaCirilloAC/updateR")
updateR::updateR(admin_password = "PASSWORD") # "PASSWORD" es la contrase√±a del sistema
```

---
# Descarga, actualizaci√≥n y R en l√≠nea
  
3\. .mono[R] Online

Es un RStudio que se ejecuta lento pero sirve para salir de apuros: https://rstudio.cloud/plans/free

---
# R
  
.center[
    <img src="images/r_consola.png" width="600">]

---
# RStudio

.center[
    <img src="images/rstudio.png" width="800">]

---
# Gu√≠a para las clases

- Un block de color gris en una diapositiva significa que se inicia c√≥digo .mono[R]. Es como si hubiera una consola de .mono[R] en la diapositiva.

- Dentro del block gris un signo de numeral ('#') significa que se inicia un comentario.

- Dentro del block gris un signo de numeral y el signo '>' ('>') es un resultado del int√©rprete.

Ejemplo:

```{r}
9 + 12 # esto es una suma
```

---
# Resultados del int√©rprete

```{r}
9 + 12

rnorm(15)
```

Los n√∫meros que aparecen entre par√©ntesis rectos ([]) luego de '#>' indican la posici√≥n del resultado.

---
# C√≥digo incompleto

Ejemplo:


```{eval = F}
> objeto_1 <- seq(1, 30, 0.5)
> plot(objeto_1
+
+ )
>
```

- En R el signo '>' (prompt) indica que el int√©rprete "est√° listo" para recibir √≥rdenes.

- Si luego de dar una orden, en lugar de aparecer nuevamente el prompt, aparece el signo de '+' indica que hay una orden incompleta. En el ejemplo de arriba lo que falta es cerrar el par√©ntesis de la funci√≥n plot().

- Si doy 'Enter' con una funci√≥n incompleta va a aparecer nuevamente el signo de '+', para salir de este ciclo debo apretar 'Esc'.

---
# Consejos para aprender

Dos consejos de [Hadley Wickham](http://adv-r.had.co.nz/Introduction.html) para aprender y mejorar la programaci√≥n en .mono[R]:

1\. Lean c√≥digo fuente. Busquen los paquetes o las funciones que usan con m√°s frecuencia y miren c√≥mo est√°n escritos.

2\. Adopten una mentalidad cient√≠fica. Si no comprenden c√≥mo funciona algo, desarrollen una hip√≥tesis, dise√±en algunos experimentos, ejec√∫tenlos y registren los resultados.

---

# Importancia del uso de scripts

Un script es un archivo en el que se escriben los comandos y las funciones que se desean guardar de una sesi√≥n de trabajo.

- .pink[Confecci√≥n:] crear estos archivos es importante para tener un historial de trabajo.
- .pink[Guardado:] El nombre del archivo debe ser lo sufcientemente claro como para refejar el contenido y encontrarlo con facilidad. En lo posible debe ser corto.
- .pink[Documentaci√≥n:] Es muy importante comentar las operaciones o creaci√≥n de funciones que se realicen para poder replicar con facilidad el trabajo. Los comentarios deben iniciar con '#'


```{r}
x <- c(1, 8, 19)
# El objeto x es un vector de tres n√∫meros. Y esto es un comentario :)
```

---
#Paquetes

Un paquete de .mono[R] es un conjunto de funciones que pertenecen a un mismo ambiente y que -por lo com√∫n- tienen una estructura general que justifica que est√©n juntas.

Descarga:

```{r, eval = FALSE}
# Descargar un paquete desde CRAN
install.packages("wooldridge")

# la funci√≥n 
install.packages("...")
# descarga el paquete a la computadora
# (funciones y documentaci√≥n de las mismas)

# Descargar un paquete desde GitHub (versi√≥n del paquete en desarrollo)
install.packages("devtools")
devtools::install_github("JustinMShea/wooldridge")
```

---
Uso (cargar un paquete):


```{r, eval = FALSE}
# Para usar las funciones de un paquete ya descargado hay que usar la funci√≥n
library(...)
library("wooldridge")
# se puede prescindir del uso de las comillas.
# En el caso de la descarga el paquete debe estar entrecomillado
library(wooldridge)

```


---
#Ayuda

```{r, eval = FALSE}
help(lm) #Comando b√°sico de b√∫squeda
?lm      #√≠dem anterior
help("+") #Ayuda sobre un operador
help.search("norm") # Busca entre los paquetes instalados las
                    # funciones que contienen el termino "norm"
??norm # √≠dem anterior
apropos("mean") #Listado de funciones que contienen el termino "norm"
help(rlm, package = "MASS") # Busca la ayudad de una funci√≥n espec√≠fica
                            # de un paquete
RSiteSearch("glm") # Busca en los manuales y ficheros de ayuda de la web
                   # R-project
find("mean") #Devuelve el paquete al que pertenece la funci√≥n.
             # (el paquete debe estar cargado: library())
example(contour) # Ejecuta los ejemplos disponibles de la funci√≥n
browseVignettes() # Muestra en web las vi√±etas disponibles y el acceso
                  # a ellas. De un paquete: (package="package-name")
vignette(all = TRUE) # Muestra todas las vi√±etas disponibles en pantalla

```

Ejemplo:

```{r, eval = FALSE}
help(mean)
```
---

# Ficha t√©cnica de una funci√≥n

- .pink[Name:] El nombre de la funci√≥n, entre llaves '{}' el paquete al que pertenece la funci√≥n
- .pink[Description:] Breve descripci√≥n de la funci√≥n
- .pink[Usage:] Sintaxis de la funci√≥n
- .pink[Arguments:] Explicaci√≥n de los argumentos de la funci√≥n
- .pink[Value:] Caracter√≠sticas de la salida de la funci√≥n (puede ser un objeto como un valor)
- .pink[References:] Bibliograf√≠a relacionada con la funci√≥n
- .pink[See Also:] Funciones relacionadas.
- .pink[Examples:] Ejemplos de c√≥mo se usa la funci√≥n

---
#Uso de funciones
Una funci√≥n en R es una o varias sentencias de c√≥digo que realizan una operaci√≥n determinada.

Una funci√≥n tiene dos caracter√≠sticas fundamentales para su correcto uso: un .pink[nombre] y .pink[argumentos] que siempre van entre par√©ntesis.

Ejemplo: funci√≥n para obtener el promedio de un conjunto de datos

.center[
.hi-purple[mean(x, trim = 0, na.rm = FALSE, ...)]
]

- Nombre de la funci√≥n: mean
- Argumentos de la funci√≥n: x, trim, na.rm, ...

De los 4 argumentos hay dos que tienen un valor asignado mediante el signo '='. Estos son valores por defecto. Si el usuario no los modifica la funci√≥n siempre va a asumir esos valores.

---

#Uso de funciones

Cuando se usa una funci√≥n:

- Los argumentos que tienen valores por defecto pueden no llamarse cuando se ejecuta la funci√≥n. 
- Los argumentos tienen un orden que resulta importante √∫nicamente si se opta por no nombrarlos.
- Los argumentos pueden ir en distinto orden siempre que sean nombrados y asignados.

Ejemplo: todas estas opciones generan el mismo resultado

```{r, eval = FALSE}
mean(x = 1:10)
mean(1:10)
mean(x = c(1:10, NA), trim = 0, na.rm = TRUE)
mean(trim = 0, x = c(1:10, NA), na.rm = TRUE)
mean(c(1:10, NA), 0, TRUE)
```

---
# Objetos
En R se crea un objeto con el asignador '<-'. Tambi√©n se puede usar '=' pero no es recomendable.

.center[

.hi-purple[nombre_del_objeto <- contenido_del_objeto]
]


Palabras reservadas: .pink[if, break, next, TRUE, NaN, else, for, NULL, Inf, NA, FALSE, function, repeat,  while, in]

- .hi-purple[Importante:] el nombre de un objeto no puede iniciar con n√∫meros, ni signos, ni puede tener espacios en blanco.
- Relevante: R es sensible a min√∫sculas y may√∫sculas.
- Sugerencia: evitar nombrar objetos con nombres de funciones existentes.

---
# Tipos de objetos: typeof()

Los tipos de objetos m√°s frecuentes son estos:

| typeof*   |      Descripci√≥n                             |          Ejemplo          |
|-----------|:--------------------------------------------:|--------------------------:|
| logical   | un vector que contiene valores l√≥gicos       | a <- c(TRUE, FALSE, TRUE) |
| double    | un vector que contiene valores reales        | a <- seq(1:10, 0.3)       |
| character | un vector que contiene valores de caracteres |    a <- letters[1:5]      |

---
#Estructuras de datos en R
La estructura fundamental en R es el vector. El resto de las estructuras se pueden pensar como combinaciones de vectores.

- matrix() y array(): una matriz o un arreglo es un vector con el atributo dim()(dimensi√≥n).
- data.frame(): uno o m√°s vectores del mismo largo (length()) que en el caso de un marco de datos ser√≠a con la misma cantidad de las (nrow())
- list(): un lista es un vector gen√©rico. Cada elemento de una lista puede ser de distinto tipo.

.center[
  <img src="images/estructura_datos.png" width="700">]
  
---
layout: false
class: inverse, middle
# .mono[R] + [Aplicaciones]
---
exclude: true



```{r embed-xaringan, echo=FALSE}
xaringanExtra::embed_xaringan(
  url = "https://taller-1-econometria-1.netlify.app",
  ratio = "16:9"
)
```

```{r metathis, echo=FALSE}
library(metathis)
meta() %>%
  meta_name("github-repo" = "paulapereda/econometrics_I_21") %>% 
  meta_social(
    title = "Introducci√≥n a R",
    url = "https://taller-1-econometria-1.netlify.app",
    image = "https://taller-1-econometria-1.netlify.app/social-card.png")
```